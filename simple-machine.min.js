(function(t){return t.SimpleMachine=function(){function t(t,n,i){this.state=t,this.transitions=null!=n?n:{},this.callbacks=null!=i?i:{}}return t.prototype.on=function(t,n,i){return null!=i&&(n=function(){return n.call(i)}),this.callbacks[t]=[n].concat(this.callbacks[t]),this},t.prototype.trigger=function(t){var n,i,s,l,a,c,r;if(null!=(null!=(a=this.transitions[t])?a[this.state]:void 0)&&"all"!==t){for(c=[this.state,this.transitions[t][this.state]],i=c[0],this.state=c[1],r=[this.callbacks.all].concat(this.callbacks[this.state]),s=0,l=r.length;l>s;s++)n=r[s],"function"==typeof n&&n(i);return!0}return!1},t}()})(exports);